<!doctype html>
<html ng-app="frequencyMap">
  <head>
    <title>CTA Bus Frequency Map</title>
    
    <!-- cdn third party scripts -->
    <script src="//ajax.googleapis.com/ajax/libs/angularjs/1.2.21/angular.min.js"></script>
    <script src="//cdn.leafletjs.com/leaflet-0.7.3/leaflet.js"></script>
    <script src="//cdnjs.cloudflare.com/ajax/libs/lodash.js/2.4.1/lodash.min.js"></script>
    <script src="//cdnjs.cloudflare.com/ajax/libs/angular-ui-bootstrap/0.10.0/ui-bootstrap.min.js"></script>
    <script src="//cdnjs.cloudflare.com/ajax/libs/angular-ui-bootstrap/0.10.0/ui-bootstrap-tpls.min.js"></script>

    <!-- local third party scripts -->
    <script src="vendor/angular-leaflet/dist/angular-leaflet-directive.min.js"></script>
    <script src="vendor/leaflet-hash/leaflet-hash.js"></script>
    <script src="vendor/leaflet.markercluster/dist/leaflet.markercluster.js"></script>
    <script src="vendor/angular-dateparser/dateparser.js"></script>
    <script src="vendor/angular-timepicker/angular.timepicker.js"></script>
    <script src="vendor/checklist-model/checklist-model.js"></script>
    
    <!-- third party css -->
    <link rel="stylesheet" href="//cdn.leafletjs.com/leaflet-0.7.3/leaflet.css">
    <link rel="stylesheet" href="//maxcdn.bootstrapcdn.com/bootstrap/3.2.0/css/bootstrap.min.css">

    <!-- app-specific -->
    <script src="js/app.js"></script>
    <script src="js/map-controller.js"></script>

    <style>
      html, body {
      height: 100%;
      }
      
      .legend {
      padding: 1em;
      box-shadow: 0 0 15px rgba(0,0,0,0.2);
      background: rgba(255,255,255, 0.9);
      border-radius: 5px;
      }

      .legend .outline {
      float: left;
      clear: left;
      margin-bottom: 8px;
      }
      
      .legend i {
      color: #777;
      width: 18px;
      height: 18px;
      float: left;
      clear: left;
      margin-right: 8px;
      opacity: 0.7;
      }

      .legend .info-label {
      float: left;
      }

      #query {
      background-color: white;
      width: 100%;
      height: auto;
      padding: 1em;
      box-shadow: 0 0 15px rgba(0,0,0,0.2);
      border-bottom: 1px solid black;
      }

      .form-inline .form-group {
      margin-right: 1em;
      }
      
      .form-control[readonly] {
      background-color: inherit;
      cursor: inherit;
      opacity: inherit;
      }

      #map {
      display: flex;
      flex-direction: column;
      height: 100%;
      }
      
      .angular-leaflet-map {
      flex: 1;
      }

    </style>
  </head>
  <body>
    <div id="map" ng-controller="MapController">
      <div id="query">
        <form class="form-inline">
          <div class="form-group">
            <label for="earliestHour">Between the hours of </label>
            <input id="earliestHour" size="6" class="form-control" type="text"
                   dn-timepicker step="1h"
                   ng-model="earliestHour"/>
            <label for="latestHour"> and </label>
            <input id="latestHour" size="6" class="form-control" type="text"
                   dn-timepicker step="1h"
                   ng-model="latestHour"/>
          </div>
          <div class="form-group">
            <select class="form-control" ng-model="currentRoute"
                    ng-options="route.id as (route.id + ' -  ' + route.name) for route in routes | orderBy:routeIDAsInt">
              <option value="">Select a route (optional)</option>
            </select>
          </div>
          <div class="form-group">
            <!-- don't ask me why this makes the spacing work and
            putting the ng-repeat on the label doesn't, I just work
            here -->
            <span ng-repeat="day in allDaysOfWeek">
            <label>
              <input type="checkbox" checklist-model="daysOfWeek" checklist-value="day.id"><br>{{ day.label }}
            </label>
            </span>
          </div>
          <div class="form-group">
            <button type="button" class="btn btn-primary" ng-click="refresh()">Refresh</button>
          </div>
      </div>
      <leaflet defaults="defaults"
               center="center"
               url-hash-center="yes"
               geojson="geojson"
               tiles="tiles"
               legend="legend"></leaflet>
    </div>
  </body>
</html>

